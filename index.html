<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HomePage</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="manifest" href="manifest.json">
    <script src="https://kit.fontawesome.com/7183df4a39.js" crossorigin="anonymous"></script>
</head>
<body>
    <div id="loading-screen">
        <div class="tv-container">
            <div class="tv-icon">
                <i class="fas fa-tv"></i>
                <div class="loader"></div>
            </div>
        </div>
    </div>
    <div class="navbar">
        <img src="logo.png" alt="Logo" class="Logo" onclick="window.location.href='index.html'">
        <h1>Anime Viewer</h1>
        <i class="fas fa-bookmark icon" onclick="location.href='history.html';"></i>
    </div>
    <div class="main-container">
        <div class="content">
            <div class="search-bar">
                <div class="search-container">
                    <input type="text" id="search-input" placeholder="Search for anime...">
                </div>
            </div>
            
        <div id="dataDisplay" style="display: none; color: red;"></div>

        <div id="search-results" class="search-results" style="display: none;">
            <h2 id="search-results-title"></h2>
            <div id="search-results-list" class="anime-list"></div>
        </div>
              <div class="section" id="recently-watched-section">
                <h2 class="section-title">Recently Watched</h2>
                <div id="recently-watched" class="anime-list"></div>
             </div>
        
            <div class="section">
                <h2 class="section-title">Latest Episodes</h2>
                <button class="arrow arrow-left" onclick="scrollLeft('latest-episodes')">&lt;</button>
                <div id="latest-episodes" class="anime-list"></div>
                <button class="arrow arrow-right" onclick="scrollRight('latest-episodes')">&gt;</button>
            </div>

            <div class="section">
                <h2 class="section-title">Top Airing Anime</h2>
                <button class="arrow arrow-left" onclick="scrollLeft('top-airing-anime')">&lt;</button>
                <div id="top-airing-anime" class="anime-list"></div>
                <button class="arrow arrow-right" onclick="scrollRight('top-airing-anime')">&gt;</button>
            </div>

            <div class="section">
                <h2 class="section-title">Popular Movies</h2>
                <button class="arrow arrow-left" onclick="scrollLeft('popular-movies')">&lt;</button>
                <div id="popular-movies" class="anime-list"></div>
                <button class="arrow arrow-right" onclick="scrollRight('popular-movies')">&gt;</button>
            </div>

            <div class="section">
                <h2 class="section-title">Action Anime</h2>
                <button class="arrow arrow-left" onclick="scrollLeft('action-anime')">&lt;</button>
                <div id="action-anime" class="anime-list"></div>
                <button class="arrow arrow-right" onclick="scrollRight('action-anime')">&gt;</button>
            </div>

            <div class="section">
                <h2 class="section-title">Adventure Anime</h2>
                <button class="arrow arrow-left" onclick="scrollLeft('adventure-anime')">&lt;</button>
                <div id="adventure-anime" class="anime-list"></div>
                <button class="arrow arrow-right" onclick="scrollRight('adventure-anime')">&gt;</button>
            </div>

            <div class="section">
                <h2 class="section-title">Comedy Anime</h2>
                <button class="arrow arrow-left" onclick="scrollLeft('comedy-anime')">&lt;</button>
                <div id="comedy-anime" class="anime-list"></div>
                <button class="arrow arrow-right" onclick="scrollRight('comedy-anime')">&gt;</button>
            </div>

            <div class="section">
                <h2 class="section-title">Drama Anime</h2>
                <button class="arrow arrow-left" onclick="scrollLeft('drama-anime')">&lt;</button>
                <div id="drama-anime" class="anime-list"></div>
                <button class="arrow arrow-right" onclick="scrollRight('drama-anime')">&gt;</button>
            </div>

            <div class="section">
                <h2 class="section-title">Sports Anime</h2>
                <button class="arrow arrow-left" onclick="scrollLeft('sports-anime')">&lt;</button>
                <div id="sports-anime" class="anime-list"></div>
                <button class="arrow arrow-right" onclick="scrollRight('sports-anime')">&gt;</button>
            </div>

            <div class="section">
                <h2 class="section-title">Isekai Anime</h2>
                <button class="arrow arrow-left" onclick="scrollLeft('isekai-anime')">&lt;</button>
                <div id="isekai-anime" class="anime-list"></div>
                <button class="arrow arrow-right" onclick="scrollRight('isekai-anime')">&gt;</button>
            </div>

            <div class="section">
                <h2 class="section-title">Thriller Anime</h2>
                <button class="arrow arrow-left" onclick="scrollLeft('thriller-anime')">&lt;</button>
                <div id="thriller-anime" class="anime-list"></div>
                <button class="arrow arrow-right" onclick="scrollRight('thriller-anime')">&gt;</button>
            </div>

            <div class="section">
                <h2 class="section-title">Slice of Life Anime</h2>
                <button class="arrow arrow-left" onclick="scrollLeft('sliceoflife-anime')">&lt;</button>
                <div id="sliceoflife-anime" class="anime-list"></div>
                <button class="arrow arrow-right" onclick="scrollRight('sliceoflife-anime')">&gt;</button>
            </div>

        </div>
    </div>
    <div id="popup-message" class="popup-message"></div>
    <script type="module" src="scripts/script.js"></script>
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/service-worker.js').then(function(registration) {
                    console.log('ServiceWorker registration successful with scope: ', registration.scope);
                }, function(error) {
                    console.log('ServiceWorker registration failed: ', error);
                });
            });
        }

        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            const installButton = document.getElementById('install-button');
            installButton.style.display = 'block';
            installButton.addEventListener('click', (e) => {
                installButton.style.display = 'none';
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then((choiceResult) => {
                    if (choiceResult.outcome === 'accepted') {
                        console.log('User accepted the install prompt');
                    } else {
                        console.log('User dismissed the install prompt');
                    }
                    deferredPrompt = null;
                });
            });
        });
        const installButtonHTML = `<button id="install-button" style="display: none;">Install App</button>`;
        document.body.insertAdjacentHTML('beforeend', installButtonHTML);
    </script>
</body>
</html>
